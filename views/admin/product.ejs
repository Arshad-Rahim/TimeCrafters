<%- include("../../views/partials/admin/header") %>

<!-- <head> -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .content-header h2 {
            font-size: 2rem;
            font-weight: 600;
        }

        .table th, .table td {
            vertical-align: middle;
        }

        .btn-icon {
            padding: 0.375rem 0.75rem;
            display: inline-flex;
            align-items: center;
        }

        .btn-icon i {
            margin-right: 5px;
        }

        .badge {
            font-size: 0.875rem;
            padding: 0.5em 0.75em;
        }

        .pagination {
            justify-content: center;
            margin-top: 20px;
        }
    </style> -->
<!-- </head> -->

<div class="container mt-5">
    <div class="content-header">
        <div>
            <h2 class="content-title card-title">Products Management</h2>
        </div>
    </div>

    <header class="card-header mb-4 text-center">
        <form action="" method="get" class="d-inline">
            <div class="input-group input-group-sm border border-1 border-grey rounded-pill" style="width: 500px; margin: 0 auto;">
                <input type="text" class="form-control border-0 rounded-pill" placeholder="Search products or brands" name="search">
                <button class="btn btn-primary border-0 rounded-pill" type="submit">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
        </form>
    </header>

    <div class="right">
        <table class="table table-striped table-hover text-center">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Product Name</th>
                    <th scope="col">Brand</th>
                    <th scope="col">Category</th>
                    <th scope="col">Sale Price</th>
                    <th scope="col">Offer Price</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Status</th>
                    <th scope="col">Action</th>
                    <th scope="col">Edit</th>
                </tr>
            </thead>
            <tbody>
                    <% for(let i=data.length-1;i>=0;i--){ %>
                    <tr>
                        <td><%=data[i].productName%></td>
                        <td><%=data[i].brand%></td>
                        <td><%= data[i].category.name %></td>
                        <td><%= data[i].regularPrice %></td>
                        <td><%= data[i].salePrice %></td>
                        <td><%= data[i].quantity %></td>
                        <td> 
                            <% if (!data[i].isBlocked) { %>
                                <span class="badge bg-success">Active</span>
                            <% } else { %>
                                <span class="badge bg-danger">Blocked</span>
                            <% } %>
                        </td>
                        <td>
                            <% if (!data[i].isBlocked) { %>
                                <button class="btn btn-danger btn-sm">
                                    <a href="/admin/blockProduct?id=<%= data[i]._id %>" class="text-white" style="text-decoration: none;">Block</a>
                                </button>
                            <% } else { %>
                                <button class="btn btn-success btn-sm">
                                    <a href="/admin/unBlockProduct?id=<%= data[i]._id %>" class="text-white" style="text-decoration: none;">Unblock</a>
                                </button>
                            <% } %>
                        <td>
                            <!-- when editing we need to padd this id here without putting that the errro occurred in my case so check that -->
                            <a href="/admin/editProduct?id=<%= data[i]._id %>" class="btn btn-info btn-sm btn-icon" title="Edit Product">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                        </td>
                    </tr>
                    <%}%>
              
            </tbody>
        </table>

        <!-- Pagination -->
        

   
  </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>

<%- include("../../views/partials/admin/footer") %>
